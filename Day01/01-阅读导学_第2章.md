# 阅读导学：JVM内存模型学习指南

> **重要更新**：本仓库已提供 `00-教学课件_JVM内存模型详解.md`（导师定制，图文并茂），**完全替代《深入理解Java虚拟机》第2章**。  
> 本导学文件提供学习路径和检查清单，配合课件使用。

## 🎯 学习目标（今天必须达成）

- ✅ 能**画出 JVM 运行时数据区**并解释每个区域的职责、生命周期、线程私有/共享属性
- ✅ 能解释"对象从创建到可被回收"的关键路径（从**分配**到**可达性**的直觉）
- ✅ 能说清楚：哪些问题通常会导致 **OOM/StackOverflow**，以及如何"复现 + 定位 + 缓解"

## 📚 推荐学习路径

### 第一步：阅读核心课件（2-3小时）

**文件**：`00-教学课件_JVM内存模型详解.md`

**学习顺序**：
1. **第1章**：JVM运行时数据区全景（建立整体认知）
2. **第2-8章**：逐一学习各个区域（程序计数器、栈、堆、方法区等）
3. **第9章**：对象创建全过程（深入理解）
4. **第10章**：实战内存溢出异常分析（理论结合实践）
5. **第11章**：总结与检查清单（自我验收）

**学习建议**：
- 边读边画图，加深理解
- 遇到代码示例，可以暂停阅读，先运行代码观察现象
- 每读完一章，尝试用自己的话复述

### 第二步：运行实验代码（1-2小时）

**实验代码位置**：`code/` 目录

**必做实验**：
1. **堆分配观察**：`HeapAllocationDemo.java`
   - 观察堆内存增长曲线
   - 观察GC发生时的现象
2. **堆溢出复现**：`HeapOomDemo.java`
   - 可控地触发OOM
   - 分析OOM原因
3. **栈溢出复现**：`StackOverflowDemo.java`
   - 理解递归深度与栈的关系

**工具使用**：
- 使用 `jvisualvm` 观察内存变化（详见课件第10.3节）

### 第三步：整理学习笔记（30分钟）

**文件**：`02-学习笔记.md`

**必写内容**：
- JVM运行时数据区结构图（可用ASCII）
- 对象创建过程（用自己的话）
- 至少1个实验的完整记录（参数、现象、结论）
- 5分钟复述稿（面试式）

### 第四步：自我验收（30分钟）

**检查清单**（详见课件第11.2节）：
- [ ] 能画出JVM运行时数据区并解释每个区域
- [ ] 能说出对象创建的5个步骤
- [ ] 能通过代码复现堆内存溢出
- [ ] 能使用jvisualvm观察内存使用情况
- [ ] 能回答面试高频问题（详见课件第11.3节）

## 📋 学习检查点（读完课件要能回答）

### 运行时数据区

- **程序计数器**：为什么需要？它会不会 OOM？为什么是唯一不会OOM的区域？
- **Java 虚拟机栈**：栈帧里大致有什么？什么情况下会 StackOverflow？什么情况下会OOM？
- **本地方法栈**：与 JVM 栈的关系？HotSpot如何实现？
- **堆**：为什么是 GC 的主战场？对象通常如何在堆里分配？新生代和老年代的区别？
- **方法区/元空间**：它主要存什么？永久代和元空间的区别？"类加载多"会带来什么问题？

### 对象创建与内存布局

- 对象创建的关键步骤有哪些？（从"new"到对象可用，5个步骤）
- 对象内存布局包含哪些部分？（对象头、实例数据、对齐填充）
- 对象头（Mark Word）存储什么信息？
- 对象的访问定位有哪两种方式？HotSpot采用哪种？

### 常见故障类型（能举例 + 能复现）

- **Java 堆 OOM**：最常见的触发方式是什么？如何通过限制 `-Xmx` 更快复现？
- **栈溢出**：递归 vs 栈帧过大分别如何触发？
- **元空间/方法区相关问题**：什么情况下类会"越加载越多"？如何验证？

## 🎓 学习输出要求

请把你的最终输出写进 `02-学习笔记.md`，至少包含：

1. **1 张"运行时数据区"结构图**（可以用文字/ASCII 画）
2. **3 个"你自己的例子"**：
   - 线程私有/共享的实际影响
   - 一个 OOM 复现（代码 + 参数 + 现象）
   - 一个栈溢出复现（代码 + 参数 + 现象）
3. **1 页"面试式复述"**（假装你在 5 分钟内讲给别人听）

## 🔗 相关资源

- **核心课件**：`00-教学课件_JVM内存模型详解.md`（必读）
- **知识点框架**：`04-第2章知识点框架.md`（快速参考）
- **实验代码**：`code/` 目录
- **实验指导**：`03-实验与练习.md`
- **笔记模板**：`02-学习笔记.md`

---

> **提示**：如果遇到不理解的概念，可以：
> 1. 回到课件对应章节重新阅读
> 2. 运行相关实验代码，观察现象
> 3. 查看 `04-第2章知识点框架.md` 快速参考
> 4. 在笔记中记录疑问，后续学习中逐步解决
